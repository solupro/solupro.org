<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Solu's è®°äº‹ç°¿</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="https://solupro.org/">
<meta property="og:site_name" content="Solu's è®°äº‹ç°¿">

<meta name="google-site-verification" content="solupro.org">



<link rel="canonical" href="https://solupro.org/">
<link href="https://solupro.org/feed.xml" type="application/atom+xml" rel="alternate" title="Solu's è®°äº‹ç°¿ Feed">
<link rel="author" href="https://plus.google.com/+solu_scarlet?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://solupro.org/assets/css/main.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://solupro.org/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://solupro.org/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://solupro.org/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://solupro.org/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://solupro.org/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://solupro.org/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://solupro.org/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="https://solupro.org">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="https://solupro.org/images/avatar.png" alt="Solu Scarlet photo" class="author-photo">
					<h4>Solu Scarlet</h4>
					<p>ä¸­å¹´ç å†œ</p>
				</li>
				<li><a href="https://solupro.org/about/">Learn More</a></li>
				<li>
					<a href="mailto:sendsoluex@gmail.com"><i class="icon-envelope"></i> Email</a>
				</li>
				
				
				<li>
					<a href="https://plus.google.com/+solu_scarlet"><i class="icon-google-plus"></i> Google+</a>
				</li>
				
				<li>
					<a href="http://github.com/https://github.com/solupro"><i class="icon-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="https://solupro.org/posts/">All Posts</a></li>
				<li><a href="https://solupro.org/tags/">All Tags</a></li>
			</ul>
		</li>
		<li>
			<a href="#">Links</a>
			<ul class="dl-submenu">
				
				<li>
					
					<a href="http://blog.kochiya.me/"  target="_blank"  >Sanaeã®ç©ºæƒ³åº­å›­</a>
					
				</li>
				
				<li>
					
					<a href="http://www.migroom.com/"  target="_blank"  >æ€å®‰é˜</a>
					
				</li>
				
			</ul>
		</li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/">dargadgetz</a></div><!-- /.image-credit -->
  
    <div class="entry-image">
      <img src="https://solupro.org/images/abstract-1.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Solu's è®°äº‹ç°¿</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2019-01-10T00:00:00+08:00"><a href="https://solupro.org/PHP7-compare-array-with-number/">January 10, 2019</a></time></span><span class="author vcard"><span class="fn"><a href="https://solupro.org/about/" title="About Solu Scarlet">Solu Scarlet</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="https://solupro.org/PHP7-compare-array-with-number/#disqus_thread">Comment</a></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://solupro.org/PHP7-compare-array-with-number/" rel="bookmark" title="PHP7ä¸­æ•°ç»„å’Œæ•´å‹çš„æ¯”è¾ƒ" itemprop="url">PHP7ä¸­æ•°ç»„å’Œæ•´å‹çš„æ¯”è¾ƒ</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p><b>èµ·å› </b> <br />
åœ¨<code>V2EX</code>çœ‹åˆ°è¿™å¸–å­ï¼Œå¹³æ—¶æ˜¯æ²¡è¯•è¿‡è¿™ä¹ˆç©ï¼Œå‡ºäºå¥½å¥‡ç¿»äº†ä¸€ä¸‹æºç  <br />
<img src="//ww1.sinaimg.cn/large/65fcc0d7gy1fz8add2zzoj20kc06c74q.jpg" alt="" /></p>

<p><b>åˆ†æ</b> <br />
ä»¥ <code>[] &gt; 123;</code> ä¸ºä¾‹ <br />
<img src="//ww1.sinaimg.cn/large/65fcc0d7gy1fz8aehqewxj211e0cumzd.jpg" alt="" /> <br />
â‘ ç•¥è¿‡è¯æ³•åˆ†æè¯­æ³•åˆ†æASTç”Ÿæˆï¼Œå¯ä»¥çœ‹åˆ° op1 &gt; op2 çš„æ“ä½œç­‰åŒäº op2 &lt; op1ï¼Œè°ƒç”¨å‡½æ•° is_smaller_function(result, op2, op1)</p>

<p><img src="//ww1.sinaimg.cn/large/65fcc0d7gy1fz8af2q7ebj211q0ccwgj.jpg" alt="" /> <br />
â‘¡æ¥ç€è°ƒç”¨ compare_functionï¼Œ è¿™é‡Œçš„ op1 == 123ï¼Œop2 == []</p>

<p><img src="//ww1.sinaimg.cn/large/65fcc0d7gy1fz8afwqc6ij211808egn2.jpg" alt="" /> <br />
â‘¢ compare_function å…¶å®å°±æ˜¯å„ç§ç±»å‹çš„æ¯”è¾ƒåˆ¤æ–­ï¼Œå¼•ç”¨ç±»å‹è½¬æ¢ç»§è€Œæ¯”è¾ƒblablablaï¼Œçœç•¥è¿™äº›ä»£ç ï¼Œå› ä¸ºå½“æˆ‘ä»¬ op2 == IS_ARRAY çš„æ—¶å€™éƒ½ä¸æˆç«‹ï¼Œæœ€ç»ˆåˆ°è¾¾ä¸Šå›¾çš„åˆ¤æ–­ï¼Œå¯ä»¥çœ‹åˆ°op1çš„å€¼å·²ç»è¢«å¿½ç•¥ï¼Œæ‰€ä»¥æ— è®ºæ˜¯ 123 è¿˜æ˜¯ PHP_MAX_INTï¼Œresult = -1 æ¥ç€è¿”å›æˆåŠŸã€‚å›åˆ°å›¾2ï¼Œæ¯”è¾ƒç»“æœå˜æˆäº† result = -1 &lt; 0; æ’ä¸º trueã€‚</p>

<p><b>ç»“è®º</b> <br />
æ•°ç»„ &gt; ä»»æ„æ•°å­—ç±»å‹ == true; å…¶ä»–ç±»å‹çš„æ¯”è¾ƒä¹Ÿåœ¨compare_functionæ‰¾åˆ°ï¼Œæœ‰å…´è¶£çš„ç¿»ç¿»å§ã€‚</p>

<p><b>å‚è€ƒ</b></p>
<ul>
  <li>PHP7.2-SRC</li>
</ul>

    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2018-12-24T00:00:00+08:00"><a href="https://solupro.org/PHP7-array-resize-and-rehash/">December 24, 2018</a></time></span><span class="author vcard"><span class="fn"><a href="https://solupro.org/about/" title="About Solu Scarlet">Solu Scarlet</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="https://solupro.org/PHP7-array-resize-and-rehash/#disqus_thread">Comment</a></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://solupro.org/PHP7-array-resize-and-rehash/" rel="bookmark" title="PHP7æ•°ç»„æ‰©å®¹å’Œrehash" itemprop="url">PHP7æ•°ç»„æ‰©å®¹å’Œrehash</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p><b>TL;DR</b><br />
<b>æ•°ç»„åˆå§‹åŒ–å®¹é‡ä¸º8ï¼Œæœ€å¤§æ˜¯0x80000000ï¼Œæ¯æ¬¡æ‰©å®¹ä¸ºåŸå®¹é‡çš„2å€ã€‚</b></p>

<p><img src="//ww1.sinaimg.cn/large/65fcc0d7gy1fz1nxgy4ajj20ww0lwn25.jpg" alt="" /></p>

<p><b>æ‰©å®¹</b><br />
æ•°ç»„æ’å…¥æ–°å…ƒç´ çš„æ—¶å€™ä¼šè°ƒç”¨<code>ZEND_HASH_IF_FULL_DO_RESIZE</code>åˆ¤æ–­å·²ä½¿ç”¨å®¹é‡æ˜¯å¦å¤§äºç­‰äºæ•°ç»„å®¹é‡ï¼ˆht-&gt;nNumUsed &gt;= ht-&gt;nTableSizeï¼‰;<br />
æ¡ä»¶æˆç«‹å†åˆ¤æ–­å·²ä½¿ç”¨æ˜¯å¦å¤§äºæœ‰æ•ˆå…ƒç´ åŠ ä¸Šæœ‰æ•ˆå…ƒç´ é™¤ä»¥32ï¼ˆht-&gt;nNumUsed &gt; ht-&gt;nNumOfElements + (ht-&gt;nNumOfElementsÂ Â» 5)ï¼‰ï¼Œç¬¦åˆè¿™æ¡ä»¶çš„å…ˆè¿›è¡Œ<code>rehash</code>æ•´ç†ï¼Œä¸ç¬¦åˆæ¡ä»¶çš„åˆ¤æ–­æ•°ç»„å®¹é‡æ˜¯å¦å°äºHT_MAX_SIZEï¼ˆ0x80000000ï¼‰;<br />
å¦‚æœæ˜¯åˆ™å®¹é‡æ‰©å¤§è‡³åŸæ¥çš„2å€ï¼Œuint32_t nSize = ht-&gt;nTableSize + ht-&gt;nTableSize; åœ¨å†…å­˜æ± ç”³è¯· nSize* sizeof(Bucket) + nSize* sizeof(uint32_t)å¤§å°çš„æ–°æ•°æ®åœ°å€;<br />
è®¾ç½®æ–°çš„nTableSizeå’ŒnTableMaskï¼Œä¿®æ”¹ht-&gt;arDataæŒ‡å‘æ–°åœ°å€ï¼ŒæŠŠæ—§Bucketæ•°æ®æ‹·è´åˆ°æ–°åœ°å€ï¼Œé‡Šæ”¾æ—§åœ°å€å†…å­˜ï¼Œæ‰§è¡Œ<code>zend_hash_rehash</code>ã€‚</p>

<p><b>rehash</b><br />
é¦–å…ˆè°ƒç”¨HT_HASH_RESETé‡ç½®æ‰€æœ‰ç´¢å¼•ä¸º-1ï¼›<br />
å¦‚æœæ•°ç»„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æœ‰æ•ˆå…ƒç´ åˆ™æŒ‰arDataæ•°ç»„é¡ºåºé‡æ–°åˆ†é…ç´¢å¼•ï¼ŒåŸç´¢å¼•å­˜åœ¨å…ƒç´ å€¼zval.u2.nextï¼›<br />
å¦åˆ™å¾ªç¯éå†bucketè‡³nNumUsedï¼Œå»é™¤IS_UNDEFçš„å…ƒç´ ï¼Œæ›´æ–°nNumUsedã€‚</p>

<p><b>å‚è€ƒ</b></p>
<ul>
  <li>ã€ŠPHP 7åº•å±‚è®¾è®¡ä¸æºç å®ç°ã€‹</li>
  <li>PHP7.2-SRC</li>
</ul>

    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2018-12-09T00:00:00+08:00"><a href="https://solupro.org/PHP7-packet-array/">December 09, 2018</a></time></span><span class="author vcard"><span class="fn"><a href="https://solupro.org/about/" title="About Solu Scarlet">Solu Scarlet</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="https://solupro.org/PHP7-packet-array/#disqus_thread">Comment</a></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://solupro.org/PHP7-packet-array/" rel="bookmark" title="PHP7ä¸­çš„packed array" itemprop="url">PHP7ä¸­çš„packed array</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p>ä¸Šæ¬¡æåˆ°PHP7çš„æ•°ç»„åˆ†ä¸ºpacked array å’Œ hash arrayï¼ŒåŒºåˆ«åœ¨äºpacked arrayå–å€¼ä¸éœ€è¦é€šè¿‡slotè·å¾—arDataçš„ä¸‹æ ‡ï¼Œå®ƒçš„keyå¯¹åº”çš„å°±æ˜¯ä¸‹æ ‡ï¼Œæ‰€ä»¥å–å€¼é€Ÿåº¦ä¸Šæ›´æœ‰ä¼˜åŠ¿å’Œæ¯”è¾ƒçœå†…å­˜ã€‚</p>

<p>packed arrayè¦æ»¡è¶³çš„æ¡ä»¶æ˜¯keyå¿…é¡»æ˜¯é€’å¢çš„æ­£æ•´å‹ã€‚</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="cp">&lt;?php</span>
<span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span> <span class="c1">// æ˜¯</span>
<span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">];</span> <span class="c1">// æ˜¯(è·¨ä¸‹æ ‡çš„æœ‰ä¾‹å¤–)</span>
<span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">];</span> <span class="c1">// ä¸æ˜¯</span>
<span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">];</span> <span class="c1">// ä¸æ˜¯</span></code></pre></figure>

<p><b>è½¬æ¢ä¸ºpacked arrayçš„æ“ä½œ</b> <br />
shuffleï¼Œarray_keysç­‰å‡½æ•°æœ€ç»ˆéƒ½ä¼šè°ƒç”¨ zend_hash_to_packed è½¬æ¢ä¸ºpacked arrayã€‚</p>

<p><b>è½¬æ¢ä¸ºhash arrayçš„æ“ä½œ</b></p>
<ol>
  <li>å¾€packed arrayæ·»åŠ string keyçš„æ“ä½œ</li>
  <li>æ·»åŠ çš„keyæ˜¯æ•´å‹ä½†æ˜¯ä¹‹å‰è¿™ä¸ªkeyè¢«unsetè¿‡ï¼ˆZ_TYPE == IS_UNDEF çŠ¶æ€ï¼‰</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>æ·»åŠ çš„key å¤§äºnTableSizeï¼ˆæ•°ç»„å®¹é‡ï¼‰å¹¶ä¸” (keyÂ Â» 1) &gt; nTableSize</td>
          <td>Â </td>
          <td>(nTableSizeÂ Â» 1) &gt; nNumOfElements è¿™é‡ŒğŸ˜‚å¤ªæ‹—å£æˆ‘å°±ç›´æ¥è´´ä»£ç å¥½äº†</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>

<p>å…³äºâ‘¡PHPæ•°ç»„unsetæ“ä½œå¹¶ä¸ä¼šç«‹é©¬åˆ é™¤æŒ‡å®šçš„bucketï¼Œè€Œä¸”æŠŠå®ƒæ ‡è¯†ä¸º<code>IS_UNDEF</code>çš„çŠ¶æ€ï¼Œç­‰å¾…rehashæˆ–è€…æ‰©å®¹çš„æ—¶å€™å†å¤„ç†ï¼ˆè¿™æ˜¯åè¯ï¼Œæœ‰æœºä¼šå†å¡«å‘å§ï¼‰ã€‚<br />
æ¯”å¦‚æœ‰ä¸€ä¸ªpacked array</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="cp">&lt;?php</span>
<span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
<span class="nb">unset</span><span class="p">(</span><span class="nv">$arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="nv">$arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> 
<span class="c1">// output</span>
<span class="nv">$arr</span> <span class="o">==</span> <span class="p">[</span><span class="mi">0</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="mi">4</span><span class="p">]</span></code></pre></figure>

<p>è¿™æ—¶å€™å°±å·²ç»è½¬åŒ–æˆäº†hash array</p>

<p>å…³äºâ‘¢å…ˆè¦å„ä¸ªå­—æ®µä¹‹é—´çš„å…³ç³»æ˜¯ï¼Œæ•°ç»„å®¹é‡(nTableSizeï¼Œåˆå§‹åŒ–æ•°ç»„å®¹é‡æ˜¯8) = å·²ä½¿ç”¨(nNumUsed) + æœªä½¿ç”¨ï¼Œ å·²ä½¿ç”¨(nNumUsed) = æœ‰æ•ˆ(nNumOfElementsï¼Œæˆ‘ä»¬countæ•°ç»„å¾—åˆ°çš„å°±æ˜¯è¿™ä¸ªå¤§å°) + æ— æ•ˆ(unsetçš„) ã€‚ç»“åˆä¸Šé¢çš„æè¿°å¾—åˆ° $arr = [0 =&gt; 1, 8 =&gt; 2]; æ˜¯ä¸€ä¸ªhash arrayã€‚</p>

<p><img src="//ww1.sinaimg.cn/large/65fcc0d7gy1fyl54zmlvhj20ze0cqq5p.jpg" alt="" /></p>

<p>æ‰“å°å‡ºè¿™æ—¶å€™çš„HashTableå¯ä»¥çœ‹åˆ°ï¼Œu.flag = 26 &amp; HASH_FLAG_PACKED(4) == 0 å·²ç»ä¸æ˜¯packed arrayäº†ï¼Œè™½ç„¶æˆ‘ä»¬ç¬¬äºŒä¸ªå…ƒç´ ä¸‹æ ‡æ˜¯8è¶…è¿‡äº†å®¹é‡nTableSizeï¼Œä½†æ˜¯è¿™æ—¶å€™å¹¶æ²¡æœ‰æ‰©å®¹ï¼Œè€Œæ˜¯è½¬ä¸ºhash arrayä½¿å¾—å†…å­˜ä½¿ç”¨è¾¹å¾—æ›´ç´§å‡‘ã€‚</p>

<p>å‚è€ƒï¼š</p>
<ul>
  <li>ã€ŠPHP 7åº•å±‚è®¾è®¡ä¸æºç å®ç°ã€‹</li>
  <li>PHP7.2-SRC</li>
  <li>nikic åšå®¢</li>
</ul>

    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2018-12-01T00:00:00+08:00"><a href="https://solupro.org/PHP7-something-about-array/">December 01, 2018</a></time></span><span class="author vcard"><span class="fn"><a href="https://solupro.org/about/" title="About Solu Scarlet">Solu Scarlet</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="https://solupro.org/PHP7-something-about-array/#disqus_thread">Comment</a></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://solupro.org/PHP7-something-about-array/" rel="bookmark" title="PHP7ä¸­æ•°ç»„çš„ä¸€äº›æ”¹è¿›" itemprop="url">PHP7ä¸­æ•°ç»„çš„ä¸€äº›æ”¹è¿›</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p>PHPçš„æ•°ç»„æ˜¯ä¸€ä¸ª <code>æœ‰åºå­—å…¸</code> ï¼Œç‰¹æ€§æ˜¯æœ‰åºã€å¯é€šè¿‡é”®æŸ¥æ‰¾ã€‚
ä¸ºäº†ä¸¤ä¸ªç‰¹æ€§ï¼ŒPHP5é€šè¿‡ä¸¤ä¸ªåŒå‘é“¾å®ç°ï¼Œä¸€ä¸ªåŒé“¾è§£å†³å…¨å±€æœ‰åºï¼Œä¸€ä¸ªåŒé“¾è§£å†³é”®hashå†²çªã€‚
ç®€å•æ¦‚æ‹¬PHP7è¿™æ–¹é¢çš„æ”¹è¿›å°±æ˜¯æŠ›å¼ƒé“¾ç»“æ„æ”¹ä¸ºæ•°ç»„ç´¢å¼•ã€‚</p>

<p>ä¸‹å›¾æ˜¯åˆå§‹åŒ–çš„ç©ºpacked arrayç»“æ„ï¼ˆpacked array å’Œ hash arrayä»¥åæœ‰æœºä¼šåœ¨å†™å§ï¼‰</p>

<p><img src="//ww1.sinaimg.cn/large/65fcc0d7gy1fyjydj7k58j20go0axmy1.jpg" alt="packed array" />
	ï¿¼ï¿¼</p>

<p>è¿™é‡Œæœ‰ä¸‰ä¸ªæ¦‚å¿µHashTable, solt, bucketã€‚HashTableæ•°ç»„æœ¬ä½“ï¼Œslotå­˜å‚¨ç´¢å¼•ï¼Œbucketå®é™…æ•°æ®çš„å­˜å‚¨ç»“æ„ã€‚å›¾ä¸­çš„ *arData æŒ‡å‘çš„æ˜¯ä¸€æ®µè¿ç»­çš„å†…å­˜ï¼Œèµ·ç‚¹ä½ç½®æ˜¯bucketçš„å¼€å§‹åœ°å€ï¼Œå¾€å‰ï¼ˆè´Ÿç´¢å¼•ï¼‰æ˜¯slotçš„åœ°å€ï¼Œè¿™å—å†…å­˜åŒæ—¶å­˜æ”¾äº†soltå’Œbucketç»“æ„ã€‚</p>

<p>å–å€¼çš„æµç¨‹æ˜¯ï¼škeyé€šè¿‡hashç®—æ³•å†å’Œæ©ç nTableMask(è´Ÿæ•°çš„nTableSize)åšä½æˆ–è¿ç®—å¾—åˆ°slotçš„ç´¢å¼•ï¼Œslotå–å‡ºbucketæ•°ç»„çš„ä¸‹æ ‡ï¼Œé€šè¿‡ä¸‹æ ‡å°±èƒ½å®šä½åˆ°å¯¹åº”çš„bucketã€‚ ï¼ˆä¸Šå›¾slotå€¼ä¸º-1æ˜¯å› ä¸ºpacked arrayæ²¡æœ‰ä½¿ç”¨slotï¼‰</p>

<p>å¦‚ä½•ä¿è¯æœ‰åºæ€§ï¼Ÿbucketæ•°ç»„æœ¬èº«æ˜¯æœ‰åºï¼Œæ·»åŠ æ•°æ®çš„æ—¶å€™ä¹Ÿæ˜¯æŒ‰ç…§é¡ºåºåŠ å…¥ã€‚å¦‚ä½•è§£å†³hashå†²çªï¼Ÿå½“å†²çªçš„æ—¶å€™slotè®°å½•æ–°çš„ä¸‹æ ‡å€¼ï¼Œæ–°åŠ å…¥çš„bucket val.u2.next è®°å½•äº†ä¸Šä¸€ä¸ªbucketçš„ä¸‹æ ‡ã€‚</p>

<p>å‚è€ƒï¼šã€ŠPHP 7åº•å±‚è®¾è®¡ä¸æºç å®ç°ã€‹</p>

    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2014-05-14T00:00:00+08:00"><a href="https://solupro.org/PHP__compare_maigc_method/">May 14, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="https://solupro.org/about/" title="About Solu Scarlet">Solu Scarlet</a></span></span>&nbsp; &bull; &nbsp;<span class="entry-comments"><a href="https://solupro.org/PHP__compare_maigc_method/#disqus_thread">Comment</a></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://solupro.org/PHP__compare_maigc_method/" rel="bookmark" title="PHP __compare é­”æœ¯æ–¹æ³•çš„å®ç°" itemprop="url">PHP __compare é­”æœ¯æ–¹æ³•çš„å®ç°</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p>ä¹‹å‰åæ§½è¿‡PHPä¸ºä»€ä¹ˆæ²¡<code>__compare</code>é­”æœ¯æ–¹æ³•ã€Š<a href="//solupro.org/php-__compare/">PHP __compare?</a>ã€‹ï¼Œå¯èƒ½å¼€å‘ç»„è§‰å¾—æ²¡æœ‰å¿…è¦å§ï¼Œæ¯•ç«Ÿå¯¹è±¡é»˜è®¤çš„æ¯”è¾ƒä¸€èˆ¬æƒ…å†µå·²ç»å¤Ÿç”¨äº†ã€‚ äºæ˜¯ä¹æ€€ç€no zuo no dieå¿ƒæƒ…å°è¯•å»å®ç°ä¸€ä¸‹ï¼Œå‘ç°éš¾åº¦æ¯”é¢„æƒ³è¦å°ã€‚ä½†ç”±äºæ‹–å»¶ç—‡çš„åŸå› è¿™ç¯‡æ–‡æ‹–åˆ°ç°åœ¨æ‰å†™ï¼Œè¿˜æœ‰ä¸€æ–¹é¢å°±æ˜¯ä¿®æ”¹çš„åœ°æ–¹æ¯”è¾ƒå¤šå’Œæ‚ä¹±ã€‚</p>

<p>å…ˆçœ‹çœ‹æ•ˆæœå§ï¼</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span></span><span class="cp">&lt;?php</span>
<span class="c1">//é»˜è®¤æƒ…å†µ</span>
<span class="k">class</span> <span class="nc">Foo</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$v</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">v</span> <span class="o">=</span> <span class="nv">$v</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$o1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
<span class="nv">$o2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$o1</span> <span class="o">&gt;</span> <span class="nv">$o2</span><span class="p">);</span>
<span class="cm">/* output */</span>
<span class="nx">bool</span><span class="p">(</span><span class="k">false</span><span class="p">)</span>

<span class="c1">//æ·»åŠ  __compare</span>
<span class="k">class</span> <span class="nc">Foo</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$v</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$v</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">v</span> <span class="o">=</span> <span class="nv">$v</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__compare</span><span class="p">(</span><span class="nv">$o</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nv">$o</span><span class="o">-&gt;</span><span class="na">v</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$o1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
<span class="nv">$o2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$o1</span> <span class="o">&gt;</span> <span class="nv">$o2</span><span class="p">);</span>
<span class="cm">/* output */</span>
<span class="nx">bool</span><span class="p">(</span><span class="k">true</span><span class="p">)</span></code></pre></figure>

<p>å¯ä»¥çœ‹å‡ºï¼Œ$o1, $o2çš„æ¯”è¾ƒè¡Œä¸ºå·²ç»è¢«<code>__compare</code>æ”¹å˜</p>


      <p class=\"more\"><a href="/PHP__compare_maigc_method/">Read more...</a></p>
    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    Previous
  
  <ul class="inline-list">
    <li>
      
        <span class="current-page">1</span>
      
    </li>
    
      <li>
        
          <a href="https://solupro.org/page2">2</a>
        
      </li>
    
      <li>
        
          <a href="https://solupro.org/page3">3</a>
        
      </li>
    
  </ul>
  
    <a href="https://solupro.org/page2" class="btn">Next</a>
  
</div><!-- /.pagination -->
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2019 Solu Scarlet. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://solupro.org/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://solupro.org/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41773558-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>



<script type='text/javascript'>window._ty_rum||function(){function sf(t){switch(typeof t){case"object":if(!t)return"null";if(t instanceof Array){for(var r="[",e=0;e<t.length;e++)r+=(e>0?",":"")+sf(t[e]);return r+"]"}var r="{",e=0;for(var n in t)"function"!=typeof t[n]&&(r+=(e>0?",":"")+sf(n)+":"+sf(t[n]),e++);return r+"}";case"string":return'"'+t.replace(/([\"\\])/g,"\\$1")+'"';case"number":return t.toString();case"boolean":return t?"true":"false";case"function":return"[function]";case"undefined":default:return"undefined"}}function now(){return Date.now?Date.now():(new Date).valueOf()}function enc(t){return wd.encodeURIComponent?encodeURIComponent(t):t}function hrs(t){return function(){}}function odl(){mc.ied()}function och(){"complete"===dc.readyState&&mc.ied()}function owl(t){function r(){mc.sd()}return ty_rum.load_time?!0:(mc.ied(),ty_rum.load_time=now(),void(9===t?r():setTimeout(r,0)))}function owu(){ul||owl(9),ul=1}function ot(){mc.touch||(mc.touch=now())}function oe(t){var r=arguments,e="unknown",n=[now()];if(0!=r.length){if("string"==typeof t){var a=r.length<4?r.length:4;n[1]=r[0],a>2&&(n[2]=r[2],n[3]=0,n[4]=r[1]),a>3&&r[3]&&(n[3]=r[3])}else if(t instanceof Event&&(n[1]=t.message||(t.error&&t.error.constructor.name)+(t.error&&t.error.message)||"",n[2]=t.lineno?t.lineno:0,n[3]=t.colno?t.colno:0,n[4]=t.filename||t.error&&t.error.fileName||t.target&&t.target.baseURI||"",n[4]==dc.URL&&(n[4]="#"),n[1]===e&&n[4]===e))return;mc.e.push(n)}}function thiscall(o,m,a){for(var f="o."+m+"(",i=0;i<a.length;i++)f+=(i>0?",":"")+"a["+i+"]";return f+=");",eval(f)}function wp_open(t){return function(){var r=arguments,e=this;if(!e._ty_wrap){var n=ut.ag.apply(e,r);e._ty_rum={method:n[0],url:n[1],start:now()}}try{return t.apply(e,r)}catch(a){return e.open=t,thiscall(e,"open",r)}}}function sz(t){return"string"==typeof t?t.length:ArrayBuffer&&t instanceof ArrayBuffer?t.byteLength:Blob&&t instanceof Blob?t.size:t.length?t.length:0}function wp_send(t){return function(){function r(t){var r,e,a=i._ty_rum;if(a){if(4!==a.readyState&&(a.end=now()),a.s=i.status,a.res=sz(i.responseText),a.readyState=i.readyState,a.cb_time=s,r=[a.method+" "+a.url,a.s>0?a.end-a.start:0,s,a.s,a.s>0?0:t,a.res,a.req],a.r&&(e=n(i),e&&(e=e.xData)&&(r.push(e.id),r.push(e.action),r.push(e.time&&e.time.duration),r.push(e.time&&e.time.qu))),ty_rum.aa.push(r),ty_rum.server.custom_urls&&ty_rum.server.custom_urls.length&&!mc.ct){if(!ty_rum.pattern){ty_rum.pattern=[];for(var o=0;o<ty_rum.server.custom_urls.length;o++)ty_rum.pattern.push(new RegExp(ty_rum.server.custom_urls[o]))}for(var o=0;o<ty_rum.pattern.length;o++)if(a.url.match(ty_rum.pattern[o])){mc.ct=a.end+s;break}}mc.sa(),i._ty_rum=null}}function e(){4==i.readyState&&r(0)}function n(t){var r;if(t.getResponseHeader){var e=ut.pj(t.getResponseHeader("X-Tingyun-Tx-Data"));e&&e.r&&t._ty_rum&&e.r+""==t._ty_rum.r+""&&(r={name:t._ty_rum.url,xData:e},pf&&wd._ty_rum.c_ra.push(r))}return r}function a(t){return function(){var r;4==i.readyState&&i._ty_rum&&(i._ty_rum.end=r=now(),i._ty_rum.readyState=4);var n=t.apply(this,arguments);return 4==i.readyState&&(s=now()-r),e(),n}}function o(t){return function(){var e=i._ty_rum;return e?"progress"==t?!0:("abort"==t?r(905):"loadstart"==t?e.start=now():"error"==t?r(990):"timeout"==t&&r(903),!0):!0}}function u(t,r){r instanceof Array||(r=[r]);for(var e=0;e<r.length;e++){var n=r[e];ut.sh(t,n,o(n),!1)}}if(!this._ty_wrap){this._ty_rum.start=now(),this._ty_rum.req=arguments[0]?sz(arguments[0]):0;var i=this,s=0,c=ut.wp(!1,this,"onreadystatechange",a);c||ut.sh(this,"readystatechange",e,!1),u(this,["error","progress","abort","load","loadstart","loadend","timeout"]),c||setTimeout(function(){ut.wp(!1,i,"onreadystatechange",a)},0)}var m=function(){function t(t){var r={},e=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?/.exec(t);return e&&(r.protocol=e[1]?e[1]+":":"http:",r.hostname=e[3],r.port=e[4]||""),r}return function(r){var e=location;if(r=ut.trim(r)){if(r=r.toLowerCase(),r.startsWith("//")&&(r=e.protocol+r),!r.startsWith("http"))return!0;var n=t(r),a=n.protocol===e.protocol&&n.hostname===e.hostname;return a&&(a=n.port===e.port?!0:!e.port&&("http:"===e.protocol&&"80"===n.port||"https:"===e.protocol&&"443"===n.port)),a}return!1}}(),d=arguments;try{try{var f=ty_rum.server;f&&f.id&&this._ty_rum&&m(this._ty_rum.url)&&(this._ty_rum.r=(new Date).getTime()%1e8,this.setRequestHeader&&this.setRequestHeader("X-Tingyun-Id",f.id+";r="+this._ty_rum.r))}catch(l){}return t.apply(this,d)}catch(l){return this.send=t,thiscall(this,"send",d)}}}var wd=window,xr=wd.XMLHttpRequest,dc=document,ty_rum=wd._ty_rum={st:now(),ra:[],c_ra:[],aa:[],snd_du:function(){return this.server.adu?1e3*this.server.adu:1e4},cc:function(){return this.server.ac?this.server.ac:10}};ty_rum.server = {id:'FWeYcFKtxr4',beacon:'beacon.tingyun.com',beacon_err:'beacon-err.tingyun.com',key:'TFTB2d8fx0A',trace_threshold:40000,custom_urls:[],sr:1.0};if(ty_rum.server&&!(ty_rum.server.sr&&Math.random()>=ty_rum.server.sr)){var trim=String.prototype.trim;String.prototype.startsWith||(String.prototype.startsWith=function(t,r){return r=r||0,this.indexOf(t,r)===r});var ut={wp:function(t,r,e,n,a){var o;try{o=r[e]}catch(u){if(!t)return!1}if(!o&&!t)return!1;if(o&&o._ty_wrap)return!1;try{r[e]=n(o,a)}catch(u){return!1}return r[e]._ty_wrap=[o],!0},mu:function(t,r){var e=arguments,n=dc.URL.match(/^([a-zA-Z]+:)/)[0]+"//"+t+"/"+r+"?av=v1.0.0&v=1.3.0&key="+enc(ty_rum.server.key)+"&ref="+enc(dc.URL)+"&rand="+now();if(e.length>2){var a=e[2];for(var o in a)n+="&"+o+"="+a[o]}return n},gt:function(t,r){function e(){r&&r.apply(this,arguments),n.parentNode&&n.parentNode.removeChild(n)}var n=dc.createElement("script");n.type="text/javascript",n.src=t,ut.sh(n,"readystatechange",function(){("loaded"==n.readyState||4==n.readyState)&&e(null,n.innerHTML)},!1),ut.sh(n,"load",function(){return e(null,n.innerHTML),!0},!1),ut.sh(n,"error",function(){return e("error",n.innerHTML),!0},!1);var a=dc.getElementsByTagName("script")[0];return a.parentNode.insertBefore(n,a)?n:void 0},fpt:function(t,r,e){function n(t,r,e){var n=dc.createElement(t);try{for(var a in r)n[a]=r[a]}catch(o){var u="<"+t;for(var a in r)u+=" "+a+'="'+r[a]+'"';u+=">",e||(u+="</"+t+">"),n=dc.createElement(u)}return n}var a=n("div",{style:"display:none"},!1),o=n("iframe",{name:"_ty_rum_frm",width:0,height:0,style:"display:none"},!1),u=n("form",{style:"display:none",action:t,enctype:"application/x-www-form-urlencoded",method:"post",target:"_ty_rum_frm"},!1),i=n("input",{name:"data",type:"hidden"},!0);return i.value=r,u.appendChild(i),a.appendChild(o),a.appendChild(u),dc.body.appendChild(a),u.submit(),o.onreadystatechange=function(){("complete"===o.readyState||4===o.readyState)&&(e(null,o.innerHTML),dc.body.removeChild(a))},!0},pt:function(t,r,e,n){if(navigator&&navigator.sendBeacon)return navigator.sendBeacon(t,r);if(ut.ie)return ut.fpt(t,r,n);var a;if(wd.XDomainRequest)return a=new XDomainRequest,a.open("POST",t),a.onload=function(){n(null,a.responseText)},ut.sh(a,"load",function(){n(null,a.responseText)},!1),ut.sh(a,"error",function(){n("POST("+t+")error")},!1),ut.wp(!0,a,"onerror",function(t){return function(){return n&&n("post error",a.responseText),!0}}),a.send(r),!0;if(!xr)return!1;a=new xr,a.overrideMimeType&&a.overrideMimeType("text/html");try{a._ty_wrap=1}catch(o){}var u=0;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(0==u&&n(null,a.responseText),u++)},a.onerror&&ut.wp(!0,a,"onerror",function(t){return function(){return n("post error",a.responseText),"function"==typeof t?t.apply(this,arguments):!0}});try{a.open("POST",t,!0)}catch(o){return ut.fpt(t,r,n)}for(var i in e)a.setRequestHeader(i,e[i]);return a.send(r),!0},sh:function(t,r,e,n){return t.addEventListener?t.addEventListener(r,e,n):t.attachEvent?t.attachEvent("on"+r,e):!1},ag:function(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);return t},pj:function(t){if(t&&"string"==typeof t){var r=window.JSON?window.JSON.parse:function(t){return new Function("return "+t)()};return r(t)}return null},trim:trim?function(t){return null==t?"":trim.call(t)}:function(t){return null==t?"":t.toString().replace(/^\s+/,"").replace(/\s+$/,"")}},pf=wd.performance?wd.performance:wd.Performance;pf&&(ut.sh(pf,"resourcetimingbufferfull",function(){var t=pf.getEntriesByType("resource");t&&(ty_rum.ra=ty_rum.ra.concat(t),pf.clearResourceTimings())},!1),ut.sh(pf,"webkitresourcetimingbufferfull",function(){var t=pf.getEntriesByType("resource");t&&(ty_rum.ra=ty_rum.ra.concat(t),pf.webkitClearResourceTimings())},!1));for(var mc=ty_rum.mc={rd:function(){return ty_rum.load_time},ied:function(){function t(){mc.sa()}ty_rum.end_time||(ty_rum.end_time=now(),mc._h=setInterval(t,2e3))},sd:function(){function t(){function t(t){return e[t]>0?e[t]-n:0}var r={};if(pf&&pf.timing){var e=pf.timing;n=e.navigationStart;var a=t("domainLookupStart"),o=t("domainLookupEnd"),u=t("redirectStart"),i=t("redirectEnd"),s=t("connectStart"),c=t("connectEnd");r={f:t("fetchStart"),qs:t("requestStart"),rs:t("responseStart"),re:t("responseEnd"),os:t("domContentLoadedEventStart"),oe:t("domContentLoadedEventEnd"),oi:t("domInteractive"),oc:t("domComplete"),ls:t("loadEventStart"),le:t("loadEventEnd")},c-s>0&&(r.cs=s,r.ce=c),o-a>0&&(r.ds=a,r.de=o),(i-u>0||i>0)&&(r.es=u,r.ee=i),0==r.le&&(r.ue=ty_rum.load_time-n);var m;if(e.msFirstPaint)m=e.msFirstPaint;else if(wd.chrome&&chrome.loadTimes){var d=chrome.loadTimes();d&&d.firstPaintTime&&(m=1e3*d.firstPaintTime)}else ty_rum.fp&&(m=ty_rum.fp);m&&(r.fp=Math.round(m-n)),e.secureConnectionStart&&(r.sl=t("secureConnectionStart"))}else r={t:n,os:ty_rum.end_time-n,ls:ty_rum.load_time-n};r.je=mc.e.length,mc.ct&&(r.ct=mc.ct-n),mc.touch&&(r.fi=mc.touch-n);var f=ty_rum.agent;return f&&(r.id=enc(f.id),r.a=f.a,r.q=f.q,r.tid=enc(f.tid),r.n=enc(f.n)),r}function r(t){var r=window._ty_rum.c_ra;if(t)for(var e=r.length-1;e>=0;e--)if(t.indexOf(r[e].name)>-1)return r[e].xData;return null}function e(t){function e(t){return s[t]>0?s[t]:0}if(t<ty_rum.server.trace_threshold)return null;if(pf&&pf.getEntriesByType){var a={tr:!0,tt:enc(dc.title),charset:dc.characterSet},o=ty_rum.ra,u=pf.getEntriesByType("resource");u&&(o=o.concat(u),pf.webkitClearResourceTimings&&pf.webkitClearResourceTimings(),pf.clearResourceTimings&&pf.clearResourceTimings()),a.res=[];for(var i=0;i<o.length;i++){var s=o[i],c={o:e("startTime"),rt:s.initiatorType,n:s.name,f:e("fetchStart"),ds:e("domainLookupStart"),de:e("domainLookupEnd"),cs:e("connectStart"),ce:e("connectEnd"),sl:e("secureConnectionStart"),qs:e("requestStart"),rs:e("responseStart"),re:e("responseEnd")},m=r(s.name);m&&(c.aid=m.id,c.atd=m.trId,c.an=m.action,c.aq=m.time&&m.time.qu,c.as=m.time&&m.time.duration),a.res.push(c)}if(mc.e.length){a.err=[];for(var i=0,d=mc.e;i<mc.e.length;i++)a.err.push({o:Math.round(d[i][0]-n),e:d[i][1],l:d[i][2],c:d[i][3],r:d[i][4]})}return a}return null}if(mc.sended)return!1;if(!mc.rd())return!1;var n=ty_rum.st,a={},o={};try{o=t(),a=e(o.ls>0?o.ls:ty_rum.load_time-n)}catch(u){}a=a?sf(a):"";var i=ut.mu(ty_rum.server.beacon,"pf",o);if(0!=a.length&&ut.pt(i,a,{},hrs("POST"))||ut.gt(i),mc.e.length>0){var u=mc.e[0];ut.gt(ut.mu(ty_rum.server.beacon_err,"err",{data:enc(sf([u[1],u[2],u[3],"#"==u[4]?dc.URL:u[4],mc.e.length]))}),hrs("GET err"))}return mc.sended=!0,mc.sa(1),!0},sa:function(t){(mc.rd()||t)&&(t||(t=!mc._last_send||now()-mc._last_send>ty_rum.snd_du()||ty_rum.aa.length>=ty_rum.cc()),ty_rum.aa.length>0&&t&&(mc._last_send=now(),ut.pt(ut.mu(ty_rum.server.beacon,"xhr"),sf({xhr:ty_rum.aa}),{},hrs("POST")),ty_rum.aa=[]))},e:[]},ul=null,l=[["load",owl],["beforeunload",owu],["pagehide",owu],["unload",owu],["error",oe]],i=0;i<l.length;i++)ut.sh(wd,l[i][0],l[i][1],!1);l=[["scroll",ot],["keypress",ot],["click",ot],["DOMContentLoaded",odl],["readystatechange",och]];for(var i=0;i<l.length;i++)ut.sh(dc,l[i][0],l[i][1],!1);if(ut.wp(!1,wd,"requestAnimationFrame",function(t){return function(){return ty_rum.fp=now(),wd.requestAnimationFrame=t,t.apply(this,arguments)}}),xr)if(xr.prototype)ut.wp(!1,xr.prototype,"open",wp_open),ut.wp(!1,xr.prototype,"send",wp_send);else{ut.ie=7;var x=xr;wd.XMLHttpRequest=function(){var t=new x;return ut.wp(!1,t,"open",wp_open),ut.wp(!1,t,"send",wp_send),t}}else wd.ActiveXObject&&(ut.ie=6);}}();</script>

          

</body>
</html>
